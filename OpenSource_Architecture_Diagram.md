# ­Ъџђ Open-Source Data Engineering Architecture
## Hate Speech Detection Platform - Complete Open-Source Solution

**Project:** Mappa dell'Intolleranza 2024  
**Architecture:** Open-Source Data Engineering Stack  
**Approach:** End-to-End Open-Source Data Pipeline  

---

## ­ЪЈЌ№ИЈ Complete Open-Source Architecture Diagram

```mermaid
graph TB
    subgraph "­Ъїљ Data Sources & Ingestion"
        A1["`**Twitter API v2**
        ­ЪЊ▒ Real-time social media data
        Рђб Tweepy Python library
        Рђб Rate limiting & error handling
        Рђб Italian language filtering`"]
        A2["`**Facebook Graph API**
        ­ЪЊў Facebook posts & comments
        Рђб Requests library
        Рђб OAuth authentication
        Рђб Community group analysis`"]
        A3["`**Instagram Basic Display**
        ­ЪЊи Visual content analysis
        Рђб Instagram API client
        Рђб Caption text extraction
        Рђб Hashtag monitoring`"]
        A4["`**Manual Data Uploads**
        ­ЪЊЂ File-based ingestion
        Рђб CSV, Excel, JSON support
        Рђб Pandas data processing
        Рђб Data validation`"]
        A5["`**Web Scraping**
        ­ЪЋи№ИЈ Additional data sources
        Рђб BeautifulSoup4
        Рђб Scrapy framework
        Рђб Selenium automation`"]
    end
    
    subgraph "­ЪЊЦ Data Ingestion Layer"
        B1["`**Apache Kafka**
        ­Ъїі Distributed streaming platform
        Рђб Real-time data streaming
        Рђб Topic-based messaging
        Рђб Fault-tolerant design
        Рђб Horizontal scaling`"]
        B2["`**Redis**
        РџА In-memory data store
        Рђб Message queuing
        Рђб Caching layer
        Рђб Session management
        Рђб Rate limiting`"]
        B3["`**Apache Airflow**
        ­Ъћё Workflow orchestration
        Рђб DAG-based scheduling
        Рђб Task dependency management
        Рђб Error handling & retries
        Рђб Monitoring & alerting`"]
    end
    
    subgraph "­Ъћё Data Processing Layer"
        C1["`**Apache Spark**
        РџА Distributed processing engine
        Рђб Batch & streaming processing
        Рђб SQL, Python, Scala support
        Рђб Machine learning integration
        Рђб Fault tolerance`"]
        C2["`**Apache Beam**
        ­Ъїі Unified batch/streaming
        Рђб Portable data pipelines
        Рђб Multiple runner support
        Рђб Complex event processing
        Рђб Data validation`"]
        C3["`**Celery**
        ­ЪљЇ Distributed task queue
        Рђб Asynchronous processing
        Рђб Worker management
        Рђб Task scheduling
        Рђб Result backend`"]
        C4["`**Dask**
        ­ЪЊі Parallel computing
        Рђб NumPy/Pandas scaling
        Рђб Distributed arrays
        Рђб Task scheduling
        Рђб Memory optimization`"]
    end
    
    subgraph "­Ъцќ AI/ML & NLP Layer"
        D1["`**Hugging Face Transformers**
        ­ЪцЌ Pre-trained models
        Рђб BERT, RoBERTa, XLM-R
        Рђб Custom model training
        Рђб Model hub integration
        Рђб Pipeline APIs`"]
        D2["`**spaCy**
        ­ЪЊЮ Industrial NLP library
        Рђб Named entity recognition
        Рђб Part-of-speech tagging
        Рђб Dependency parsing
        Рђб Custom models`"]
        D3["`**NLTK**
        ­ЪЊџ Natural language toolkit
        Рђб Text preprocessing
        Рђб Sentiment analysis
        Рђб Language detection
        Рђб Corpus management`"]
        D4["`**scikit-learn**
        ­Ъћг Machine learning library
        Рђб Classification algorithms
        Рђб Feature extraction
        Рђб Model evaluation
        Рђб Pipeline management`"]
        D5["`**OpenAI API Integration**
        ­ЪДа GPT models via API
        Рђб GPT-4o integration
        Рђб Custom prompts
        Рђб Response parsing
        Рђб Cost optimization`"]
        D6["`**Google AI Integration**
        ­Ъћ« Gemini models via API
        Рђб Multimodal processing
        Рђб Text generation
        Рђб Model comparison
        Рђб API management`"]
    end
    
    subgraph "­ЪњЙ Data Storage Layer"
        E1["`**PostgreSQL**
        ­ЪЌЃ№ИЈ Primary relational database
        Рђб ACID compliance
        Рђб JSON support
        Рђб Full-text search
        Рђб Replication & clustering`"]
        E2["`**MongoDB**
        ­ЪЇЃ Document database
        Рђб Flexible schema
        Рђб Horizontal scaling
        Рђб Aggregation pipelines
        Рђб GridFS for files`"]
        E3["`**Apache Cassandra**
        ­ЪЊі Distributed NoSQL
        Рђб High availability
        Рђб Linear scalability
        Рђб Time-series data
        Рђб Multi-datacenter`"]
        E4["`**MinIO**
        ­ЪЌё№ИЈ S3-compatible storage
        Рђб Object storage
        Рђб Data lake architecture
        Рђб Versioning & lifecycle
        Рђб Multi-tenant support`"]
        E5["`**Elasticsearch**
        ­ЪћЇ Search & analytics engine
        Рђб Full-text search
        Рђб Real-time analytics
        Рђб Kibana integration
        Рђб Log aggregation`"]
    end
    
    subgraph "­ЪЊі Analytics & BI Layer"
        F1["`**Apache Superset**
        ­ЪЊѕ Business intelligence platform
        Рђб Interactive dashboards
        Рђб SQL query interface
        Рђб Data visualization
        Рђб User management`"]
        F2["`**Grafana**
        ­ЪЊі Monitoring & observability
        Рђб Real-time dashboards
        Рђб Alerting system
        Рђб Data source integration
        Рђб Custom panels`"]
        F3["`**Jupyter Notebooks**
        ­ЪЊЊ Interactive development
        Рђб Data exploration
        Рђб Model development
        Рђб Documentation
        Рђб Collaboration`"]
        F4["`**Apache Zeppelin**
        ­ЪдЊ Notebook platform
        Рђб Multi-language support
        Рђб Spark integration
        Рђб Data visualization
        Рђб Collaborative features`"]
    end
    
    subgraph "­Ъїљ API & Web Layer"
        G1["`**FastAPI**
        РџА Modern web framework
        Рђб Automatic API docs
        Рђб Type hints
        Рђб Async support
        Рђб High performance`"]
        G2["`**Flask**
        ­ЪїХ№ИЈ Lightweight web framework
        Рђб RESTful APIs
        Рђб Template engine
        Рђб Extensions ecosystem
        Рђб Microservices ready`"]
        G3["`**Streamlit**
        ­Ъњ╗ Data app framework
        Рђб Rapid prototyping
        Рђб Interactive widgets
        Рђб Real-time updates
        Рђб Easy deployment`"]
        G4["`**Dash**
        ­ЪЊі Analytical web apps
        Рђб Plotly integration
        Рђб Reactive programming
        Рђб Component library
        Рђб Enterprise features`"]
    end
    
    subgraph "­Ъћњ Security & Monitoring"
        H1["`**Apache Ranger**
        ­ЪЏА№ИЈ Security framework
        Рђб Access control
        Рђб Data governance
        Рђб Audit logging
        Рђб Policy management`"]
        H2["`**Prometheus**
        ­ЪЊі Metrics collection
        Рђб Time-series database
        Рђб Alerting rules
        Рђб Service discovery
        Рђб Exporters ecosystem`"]
        H3["`**Grafana Loki**
        ­ЪЊЮ Log aggregation
        Рђб Log parsing
        Рђб Label indexing
        Рђб Query language
        Рђб Grafana integration`"]
        H4["`**Jaeger**
        ­ЪћЇ Distributed tracing
        Рђб Request tracking
        Рђб Performance analysis
        Рђб Service maps
        Рђб Error debugging`"]
    end
    
    subgraph "­Ъљ│ Container & Orchestration"
        I1["`**Docker**
        ­Ъљ│ Containerization
        Рђб Application packaging
        Рђб Environment consistency
        Рђб Resource isolation
        Рђб Easy deployment`"]
        I2["`**Kubernetes**
        РўИ№ИЈ Container orchestration
        Рђб Auto-scaling
        Рђб Service discovery
        Рђб Load balancing
        Рђб Rolling updates`"]
        I3["`**Docker Compose**
        ­ЪћД Multi-container apps
        Рђб Development environment
        Рђб Service dependencies
        Рђб Network configuration
        Рђб Volume management`"]
    end
    
    %% Data Flow Connections
    A1 --> B1
    A2 --> B1
    A3 --> B1
    A4 --> B2
    A5 --> B1
    
    B1 --> C1
    B2 --> C3
    B3 --> C1
    
    C1 --> C2
    C2 --> C4
    C3 --> C1
    
    C1 --> D1
    C2 --> D2
    C3 --> D3
    C4 --> D4
    C1 --> D5
    C2 --> D6
    
    D1 --> E1
    D2 --> E2
    D3 --> E3
    D4 --> E4
    D5 --> E1
    D6 --> E2
    
    E1 --> F1
    E2 --> F2
    E3 --> F3
    E4 --> F4
    E5 --> F1
    
    F1 --> G1
    F2 --> G2
    F3 --> G3
    F4 --> G4
    
    G1 --> H1
    G2 --> H2
    G3 --> H3
    G4 --> H4
    
    %% Container connections
    I1 -.-> C1
    I1 -.-> D1
    I1 -.-> E1
    I2 -.-> C1
    I2 -.-> D1
    I2 -.-> E1
    I3 -.-> G1
    I3 -.-> G2
```

---

## ­Ъћё Data Pipeline Flow Diagram

```mermaid
flowchart LR
    subgraph "­ЪЊЦ Data Ingestion Pipeline"
        A1["`**Social Media APIs**
        ­ЪЊ▒ Twitter, Facebook, Instagram
        Рђб Real-time data collection
        Рђб Rate limiting & error handling`"] --> B1["`**Apache Kafka**
        ­Ъїі Message streaming
        Рђб Topic partitioning
        Рђб Fault tolerance`"]
        A2["`**File Uploads**
        ­ЪЊЂ CSV, Excel, JSON
        Рђб Batch processing
        Рђб Data validation`"] --> B2["`**Redis Queue**
        РџА Task queuing
        Рђб Priority handling
        Рђб Retry mechanisms`"]
        A3["`**Web Scraping**
        ­ЪЋи№ИЈ Additional sources
        Рђб Scheduled collection
        Рђб Content extraction`"] --> B3["`**Apache Airflow**
        ­Ъћё Workflow orchestration
        Рђб DAG scheduling
        Рђб Dependency management`"]
    end
    
    subgraph "­Ъћё Data Processing Pipeline"
        B1 --> C1["`**Apache Spark**
        РџА Stream processing
        Рђб Real-time classification
        Рђб Data transformation`"]
        B2 --> C2["`**Celery Workers**
        ­ЪљЇ Async processing
        Рђб Task distribution
        Рђб Result collection`"]
        B3 --> C3["`**Apache Beam**
        ­Ъїі Batch processing
        Рђб ETL operations
        Рђб Data validation`"]
        C1 --> C4["`**Data Quality Checks**
        РюЁ Validation pipeline
        Рђб Completeness checks
        Рђб Accuracy validation
        Рђб Consistency monitoring`"]
        C2 --> C4
        C3 --> C4
    end
    
    subgraph "­Ъцќ AI/ML Processing Pipeline"
        C4 --> D1["`**Text Preprocessing**
        ­ЪЊЮ NLP pipeline
        Рђб Tokenization
        Рђб Cleaning & normalization
        Рђб Feature extraction`"]
        D1 --> D2["`**Model Ensemble**
        ­ЪДа Multi-model voting
        Рђб BERT classification
        Рђб GPT-4o analysis
        Рђб Gemini processing
        Рђб Confidence scoring`"]
        D2 --> D3["`**Result Aggregation**
        ­ЪЊі Ensemble voting
        Рђб Weighted scoring
        Рђб Consensus building
        Рђб Quality assessment`"]
    end
    
    subgraph "­ЪњЙ Data Storage Pipeline"
        D3 --> E1["`**PostgreSQL**
        ­ЪЌЃ№ИЈ Structured data
        Рђб Classification results
        Рђб User management
        Рђб Audit logs`"]
        D3 --> E2["`**MongoDB**
        ­ЪЇЃ Document storage
        Рђб Raw posts
        Рђб Metadata
        Рђб Analytics data`"]
        D3 --> E3["`**MinIO**
        ­ЪЌё№ИЈ Object storage
        Рђб File backups
        Рђб Model artifacts
        Рђб Data lake`"]
        D3 --> E4["`**Elasticsearch**
        ­ЪћЇ Search index
        Рђб Full-text search
        Рђб Analytics queries
        Рђб Real-time dashboards`"]
    end
    
    subgraph "­ЪЊі Analytics Pipeline"
        E1 --> F1["`**Apache Superset**
        ­ЪЊѕ BI dashboards
        Рђб Interactive visualizations
        Рђб Custom reports
        Рђб User dashboards`"]
        E2 --> F2["`**Grafana**
        ­ЪЊі Monitoring dashboards
        Рђб Real-time metrics
        Рђб Alerting system
        Рђб Performance monitoring`"]
        E3 --> F3["`**Jupyter Notebooks**
        ­ЪЊЊ Data exploration
        Рђб Ad-hoc analysis
        Рђб Model development
        Рђб Research notebooks`"]
        E4 --> F4["`**Custom Analytics**
        ­Ъћг Advanced analytics
        Рђб Trend analysis
        Рђб Pattern detection
        Рђб Predictive modeling`"]
    end
    
    subgraph "­Ъїљ Presentation Pipeline"
        F1 --> G1["`**FastAPI Backend**
        РџА RESTful APIs
        Рђб Data endpoints
        Рђб Authentication
        Рђб Rate limiting`"]
        F2 --> G1
        F3 --> G2["`**Streamlit Frontend**
        ­Ъњ╗ Interactive app
        Рђб Real-time dashboards
        Рђб User interface
        Рђб Data visualization`"]
        F4 --> G2
        G1 --> G2
    end
```

---

## ­ЪЏа№ИЈ Technology Stack Details

### **Data Ingestion & Streaming**
- **Apache Kafka**: Distributed streaming platform for real-time data
- **Redis**: In-memory data store for caching and queuing
- **Apache Airflow**: Workflow orchestration and scheduling
- **Tweepy**: Python library for Twitter API integration
- **Requests**: HTTP library for API interactions

### **Data Processing & Analytics**
- **Apache Spark**: Distributed processing engine for big data
- **Apache Beam**: Unified batch and streaming data processing
- **Celery**: Distributed task queue for asynchronous processing
- **Dask**: Parallel computing library for scaling Python
- **Pandas**: Data manipulation and analysis library

### **AI/ML & NLP**
- **Hugging Face Transformers**: Pre-trained transformer models
- **spaCy**: Industrial-strength natural language processing
- **NLTK**: Natural language toolkit for text processing
- **scikit-learn**: Machine learning library for Python
- **OpenAI API**: GPT models integration
- **Google AI**: Gemini models integration

### **Data Storage**
- **PostgreSQL**: Primary relational database
- **MongoDB**: Document-oriented database
- **Apache Cassandra**: Distributed NoSQL database
- **MinIO**: S3-compatible object storage
- **Elasticsearch**: Search and analytics engine

### **Analytics & Visualization**
- **Apache Superset**: Business intelligence platform
- **Grafana**: Monitoring and observability platform
- **Jupyter Notebooks**: Interactive development environment
- **Apache Zeppelin**: Multi-purpose notebook platform
- **Plotly**: Interactive visualization library

### **Web & API Development**
- **FastAPI**: Modern web framework for APIs
- **Flask**: Lightweight web framework
- **Streamlit**: Data app framework
- **Dash**: Analytical web applications
- **Gunicorn**: Python WSGI HTTP server

### **Security & Monitoring**
- **Apache Ranger**: Security framework for data governance
- **Prometheus**: Metrics collection and monitoring
- **Grafana Loki**: Log aggregation system
- **Jaeger**: Distributed tracing system
- **Sentry**: Error tracking and monitoring

### **Container & Orchestration**
- **Docker**: Containerization platform
- **Kubernetes**: Container orchestration
- **Docker Compose**: Multi-container application management
- **Helm**: Kubernetes package manager

---

